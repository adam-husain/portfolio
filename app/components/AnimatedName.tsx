"use client";

import { useEffect, useRef, useState } from "react";

// Animation timing constants
const TOTAL_DURATION_MS = 3000;
const LETTER_COUNT = 11;
const OVERLAP_FACTOR = 0.6;

// Per-letter duration: 5000 / (1 + (11 - 1) * 0.6) = 5000 / 7 ≈ 714ms
const LETTER_DURATION_MS = TOTAL_DURATION_MS / (1 + (LETTER_COUNT - 1) * OVERLAP_FACTOR);

// Delay between letter starts: 714 * 0.6 ≈ 428ms
const LETTER_DELAY_MS = LETTER_DURATION_MS * OVERLAP_FACTOR;

// Animation order mapping: path index → animation order (0-indexed)
// Letters: A(0), d(1), a(2), m(3), H(4), u(5), s(6), a(7), i-dot(8), i-stem(9), n(10)
// i-dot animates last (order 10)
const ANIMATION_ORDER: number[] = [
  0,  // A → 1st
  1,  // d → 2nd
  2,  // a → 3rd
  3,  // m → 4th
  4,  // H → 5th
  5,  // u → 6th
  6,  // s → 7th
  7,  // a → 8th
  10, // i-dot → 11th (LAST)
  8,  // i-stem → 9th
  9,  // n → 10th
];

// Path data for each letter
const PATHS = [
  // Letter: A
  "m35.8 349.6c20 0 47.2 0.8 86.4 4-68 106.4-121.6 206.4-121.6 250.4 0 10.4 3.2 28 27.2 41.6 40-94.4 88.8-195.2 139.2-288 32.8 4 71.2 8.8 118.4 16-8.8 44-13.6 84.8-13.6 119.2 0 64.8 18.4 107.2 62.4 107.2 52.8 0 106.4-60 138.4-145.6l-8-8c-41.6 80.8-76.8 118.4-104.8 118.4-21.6 0-29.6-23.2-29.6-64 0-140 92.8-449.6 124.8-475.2-16-16-31.2-25.6-42.4-25.6-10.4 0-22.4 7.2-38.4 22.4-49.6 46.4-144 168.8-225.6 291.2-20.8-3.2-40-5.6-57.6-5.6-40.8 0-72 11.2-83.2 41.6zm351.2-299.2c-32.8 73.6-72.8 189.6-96 295.2-30.4-7.2-67.2-16.8-103.2-24.8 74.4-132.8 149.6-240 199.2-270.4z",
  // Letter: d
  "M684.6 324c0.8-4 1.6-7.2 1.6-11.2 0-16.8-12.8-24.8-35.2-24.8-99.2 0-215.2 156-215.2 244.8 0 47.2 32.8 67.2 60 67.2 48.8 0 111.2-63.2 163.2-148.8-9.6 36.8-15.2 67.2-15.2 85.6 0 28 12.8 60 52.8 60 54.4 0 124-60.8 155.2-143.2l-9.6-7.2c-33.6 72.8-90.4 118.4-123.2 118.4-18.4 0-18.4-14.4-18.4-44.8 0-158.4 184-451.2 184-501.6 0-10.4-7.2-18.4-16-18.4-44 0-116 187.2-175.2 341.6-51.2 133.6-129.6 220-172.8 220-17.6 0-28.8-14.4-28.8-38.4 0-61.6 76-211.2 162.4-211.2 14.4 0 24.8 4 30.4 12z",
  // Letter: a
  "M1052.6 406.4c-39.2 57.6-118.4 174.4-168 174.4-14.4 0-21.6-9.6-21.6-31.2 0-77.6 89.6-226.4 164.8-226.4 28.8 0 39.2 20.8 39.2 44.8 0 8.8-1.6 19.2-4 28 23.2 0 39.2-8 39.2-34.4 0-36-31.2-60-72.8-60-104 0-221.6 150.4-221.6 245.6 0 44.8 25.6 66.4 59.2 66.4 39.2 0 74.4-31.2 120.8-92.8-1.6 8.8-2.4 16.8-2.4 23.2 0 28 18.4 56 57.6 56 56.8 0 124.8-59.2 158.4-145.6l-8-8c-48 84.8-99.2 126.4-128 126.4-19.2 0-27.2-19.2-27.2-35.2 0-38.4 46.4-92.8 46.4-111.2 0-12-22.4-18.4-32-20z",
  // Letter: m
  "M1384.8 593.6c10.4-21.6 21.6-48.8 38.4-74.4 49.6-76 78.4-119.2 104.8-119.2 12 0 23.2 8 23.2 28.8 0 31.2-24 74.4-24 113.6 0 32 16 58.4 53.6 58.4 64 0 112.8-76 138.4-143.2l-9.6-11.2c-24.8 54.4-63.2 126.4-107.2 126.4-18.4 0-24-12.8-24-27.2 0-33.6 29.6-91.2 29.6-133.6 0-27.2-12-51.2-45.6-51.2-54.4 0-99.2 62.4-132.8 123.2 8.8-21.6 24.8-72 24.8-112.8 0-32.8-10.4-60.8-43.2-60.8-57.6 0-125.6 84-168.8 152 12-40 20.8-76.8 20.8-91.2 0-12.8-7.2-20.8-21.6-20.8-15.2 0-30.4 9.6-36.8 16.8-0.8 70.4-55.2 201.6-55.2 213.6 0 8 28 16.8 43.2 16.8 39.2-108 135.2-234.4 181.6-234.4 14.4 0 20 12 20 30.4 0 56-50.4 169.6-50.4 184 0 11.2 28 16 40.8 16z",
  // Letter: H
  "M2403.4 0c-23.2 0-38.4 29.6-44 41.6-14.4 30.4-49.6 137.6-80.8 240-40.8-4-85.6-7.2-136-7.2-16 0-32 0.8-46.4 1.6l62.4-203.2c3.2-10.4 6.4-22.4 6.4-34.4 0-19.2-8-38.4-36.8-38.4-60 0-160 81.6-160 154.4 0 25.6 12.8 45.6 48 45.6-2.4-7.2-4-17.6-4-27.2 0-52.8 47.2-150.4 99.2-150.4 9.6 0 11.2 3.2 11.2 11.2 0 16-7.2 35.2-11.2 47.2-27.2 78.4-49.6 144.8-68 200.8-39.2 8-65.6 22.4-66.4 48.8l52.8-5.6c-56.8 174.4-75.2 247.2-88 320.8 16.8 0 44-14.4 55.2-51.2 6.4-21.6 46.4-150.4 85.6-274.4 47.2-4 88.8-4.8 186.4-5.6-18.4 60-34.4 116-42.4 148-12.8 49.6-19.2 92.8-19.2 120.8 0 40.8 13.6 58.4 55.2 62.4-0.8-7.2-1.6-16-1.6-28.8 0-39.2 7.2-102.4 26.4-193.6 6.4-32.8 15.2-70.4 24.8-109.6 20.8 0 43.2-0.8 67.2-25.6-19.2 0-39.2-2.4-60-3.2 28-108.8 61.6-225.6 84-284.8z",
  // Letter: u
  "M2577.4 359.2c-30.4 60-96 208.8-145.6 208.8-26.4 0-28.8-40-28.8-53.6 0-53.6 36-133.6 53.6-160.8-8.8-9.6-24-16-29.6-16-24 0-70.4 120.8-70.4 181.6 0 43.2 24 80.8 60 80.8 40 0 75.2-46.4 104.8-99.2-3.2 13.6-5.6 27.2-5.6 40 0 32.8 13.6 59.2 56 59.2 56.8 0 126.4-60 160.8-146.4l-10.4-7.2c-39.2 82.4-100 129.6-133.6 129.6-19.2 0-26.4-12.8-26.4-32 0-53.6 53.6-155.2 53.6-164 0-13.6-29.6-19.2-38.4-20.8z",
  // Letter: s
  "M2691.6 512c0 48 24.8 104.8 100 104.8 45.6 0 85.6-20.8 102.4-66.4 48-7.2 92-36.8 112-95.2l-7.2-8c-31.2 60-64 84-100.8 90.4 3.2-12 4.8-24.8 4.8-39.2 0-73.6-41.6-140-41.6-192.8 0-18.4 4.8-29.6 4.8-35.2 0-5.6-4-10.4-12.8-10.4-15.2 0-31.2 15.2-31.2 54.4v9.6c-20 42.4-47.2 80.8-79.2 116-8.8 9.6-51.2 8.8-51.2 72zm159.2-12.8c0 16-1.6 27.2-3.2 37.6-48.8-10.4-83.2-44-99.2-78.4 24-24 52.8-63.2 77.6-104 8 44 24.8 94.4 24.8 144.8zm-57.6 89.6c-41.6 0-65.6-39.2-65.6-77.6 0-16.8 4.8-27.2 17.6-28 16.8 27.2 53.6 57.6 98.4 66.4-12 35.2-37.6 39.2-50.4 39.2z",
  // Letter: a
  "M3208.6 406.4c-39.2 57.6-118.4 174.4-168 174.4-14.4 0-21.6-9.6-21.6-31.2 0-77.6 89.6-226.4 164.8-226.4 28.8 0 39.2 20.8 39.2 44.8 0 8.8-1.6 19.2-4 28 23.2 0 39.2-8 39.2-34.4 0-36-31.2-60-72.8-60-104 0-221.6 150.4-221.6 245.6 0 44.8 25.6 66.4 59.2 66.4 39.2 0 74.4-31.2 120.8-92.8-1.6 8.8-2.4 16.8-2.4 23.2 0 28 18.4 56 57.6 56 56.8 0 124.8-59.2 158.4-145.6l-8-8c-48 84.8-99.2 126.4-128 126.4-19.2 0-27.2-19.2-27.2-35.2 0-38.4 46.4-92.8 46.4-111.2 0-12-22.4-18.4-32-20z",
  // Letter: i (dot)
  "M3487.2 230.4c25.6 0 52-23.2 52-43.2 0-18.4-10.4-24.8-26.4-24.8-25.6 0-58.4 19.2-58.4 41.6 0 18.4 15.2 26.4 32.8 26.4z",
  // Letter: i (stem)
  "M3444.8 304.8c-54.4 0-115.2 164-115.2 224.8 0 37.6 20 67.2 61.6 67.2 62.4 0 126.4-50.4 157.6-142.4l-7.2-8c-45.6 91.2-87.2 122.4-123.2 122.4-26.4 0-39.2-9.6-39.2-48 0-75.2 83.2-172 83.2-198.4 0-11.2-8-17.6-17.6-17.6z",
  // Letter: n
  "M3497.2 570.4c8.8 12 25.6 17.6 42.4 17.6 41.6-70.4 115.2-197.6 181.6-197.6 18.4 0 32 9.6 32 39.2 0 37.6-23.2 78.4-23.2 111.2 0 29.6 18.4 51.2 56 51.2 60 0 104.8-56.8 138.4-135.2l-8.8-10.4c-29.6 59.2-72 124.8-112 124.8-13.6 0-24-8-24-30.4 0-39.2 32.8-76.8 32.8-126.4 0-36-17.6-72-59.2-72-60.8 0-124 76-166.4 140.8 14.4-44 25.6-88.8 25.6-105.6 0-12.8-7.2-20.8-21.6-20.8-15.2 0-30.4 9.6-36.8 16.8-0.8 69.6-56.8 187.2-56.8 196.8z",
];

export default function AnimatedName() {
  const svgRef = useRef<SVGSVGElement>(null);
  const [isAnimating, setIsAnimating] = useState(false);

  useEffect(() => {
    // Trigger animation on mount
    setIsAnimating(true);
  }, []);

  return (
    <svg
      ref={svgRef}
      viewBox="0 0 3925 646"
      className="animated-name w-[95vw] sm:w-[85vw] lg:w-[75vw] xl:w-[65vw] h-auto"
      aria-label="Adam Husain"
      role="img"
      data-animating={isAnimating}
    >
      {PATHS.map((d, index) => {
        const animationOrder = ANIMATION_ORDER[index];
        const delay = animationOrder * LETTER_DELAY_MS;
        const fillDelay = delay + LETTER_DURATION_MS * 0.7; // Fill starts at 70% through stroke

        return (
          <path
            key={index}
            d={d}
            pathLength={1}
            fill="#fca311"
            stroke="#fca311"
            strokeWidth={2}
            style={{
              "--letter-delay": `${delay}ms`,
              "--letter-duration": `${LETTER_DURATION_MS}ms`,
              "--fill-delay": `${fillDelay}ms`,
            } as React.CSSProperties}
          />
        );
      })}
    </svg>
  );
}
